/*---------------------------------------------------------------
  0. SCANLINE OVERLAY  –  same scaffold as index/login
----------------------------------------------------------------*/
.app-container {
  position: relative;
  height: 100vh;
  overflow: hidden;
  margin-left: var(--nav-width);

  background-image: linear-gradient(175deg,
      var(--accent-color) -200%,
      rgba(13, 15, 17, 1) 25%);
  background-attachment: fixed;
  background-size: cover;
}

.app-container::before {
  content: '';
  position: absolute; inset: 0; pointer-events: none;
  background-size: 1024px 1024px;
  background: radial-gradient(circle at 68% 16%,
      rgba(114, 105, 221, 0.08) 0%,
      rgba(11, 21, 158, 0) 35%);
  z-index: 4000;
}

.app-container::after {
  content: '';
  position: absolute; inset: 0; pointer-events: none;
  background-image:
    url('/assets/images/white_noise_overlay.png'),
    repeating-linear-gradient(to bottom,
      rgba(255,255,255,.06) 0px,
      rgba(255,255,255,.06) 3px,
      transparent 3px,
      transparent 6px);
  mix-blend-mode: soft-light;
  z-index: 5000; /* above vignette but below nav */
}

@media (max-width: 768px) {
  .app-container { margin-left: 0; padding-top: var(--btn-size-mobile); height: auto; min-height: calc(100dvh - var(--btn-size-mobile)); background-attachment: scroll; }
  .app-container::before { background: transparent; mix-blend-mode: normal; }
}

/* utility */
.hidden { display: none !important; }

/*---------------------------------------------------------------
  1. MAIN WRAPPER (same cadence as home)
----------------------------------------------------------------*/
.search-main {
  display: flex; flex-direction: column; align-items: center; gap: var(--spacing-lg);
  max-width: clamp(1000px, 80vw, 1900px);
  margin-inline: auto;
}

/*---------------------------------------------------------------
  2. CONTROLS PANEL  (glow wrapper + cut-corner inner plate)
----------------------------------------------------------------*/
.search-controls { 
  width: clamp(340px, 90%, 1500px);
  padding: var(--spacing-lg);
}

.search-controls__title {
  font-size: clamp(1.25rem, 1.2vw + .9rem, 2rem);
  font-weight: 700;
  letter-spacing: .02em;
  text-align: left;
  margin: 0 0 var(--spacing-md) 0;
  text-shadow: 0 0 6px rgba(0, 255, 255, .25);
  position: relative;
}

/* accent baseline under title (mirrors .hero::after) */
.search-controls__title::after {
  content: '';
  display: block;
  width: min(420px, 60%);
  height: 2px;
  margin-top: .35rem;
  background: linear-gradient(90deg, var(--accent-color) 0%, var(--words-color) 50%, transparent 100%);
}

.search-controls__form-wrapper {
    /* stationary glow wrapper (mirrors .feature-card) */
  filter:
    drop-shadow(1px 0 0 var(--accent-color))
    drop-shadow(-1px 0 0 var(--accent-color))
    drop-shadow(0 1px 0 var(--accent-color))
    drop-shadow(0 -1px 0 var(--accent-color))
    drop-shadow(0 0 10px rgba(var(--accent), .3));
  -webkit-filter:
    drop-shadow(1px 0 0 var(--accent-color))
    drop-shadow(-1px 0 0 var(--accent-color))
    drop-shadow(0 1px 0 var(--accent-color))
    drop-shadow(0 -1px 0 var(--accent-color))
    drop-shadow(0 0 10px rgba(var(--accent), .3));
  position: relative;
}

/* inner panel */
.search-controls__form {
  position: relative;
  padding: var(--spacing-lg) calc(var(--spacing-md) + 10px);
  background: rgba(13, 15, 17, .95);
  clip-path: polygon(100% 0,
      5% 0,
      4% 5%,
      0% 5%,
      0 95%,
      1% 100%,
      95% 100%,
      100% 90%);
  -webkit-clip-path: polygon(100% 0,
      5% 0,
      4% 5%,
      0% 5%,
      0 95%,
      1% 100%,
      98.5% 100%,
      100% 90%);

  display: grid;
  grid-template-columns: minmax(92px, auto) minmax(280px, 1fr) auto auto;
  grid-auto-rows: auto;
  align-items: center;
  gap: var(--spacing-md);
}

/* neon rim (same logic as feature cards) */
.search-controls__form::after {
  content: '';
  position: absolute; inset: -1px; clip-path: inherit; pointer-events: none; z-index: -1;
  mix-blend-mode: screen; opacity: .3;
}

/* subtle inner grid texture */
.search-controls__form::before {
  content: '';
  position: absolute; inset: 0; clip-path: inherit; pointer-events: none;
  background:
    repeating-linear-gradient(to right, rgba(255,255,255,.02) 0 1px, transparent 1px 44px),
    repeating-linear-gradient(to bottom, rgba(255,255,255,.02) 0 1px, transparent 1px 44px);
  mask: linear-gradient(#000, transparent 85%);
}

/* label next to select */
.search-controls label { color: rgba(255,255,255,.85); letter-spacing: .06em; }

/* select & input — match login inputs */
.search-controls__select,
.search-controls__input {
  font-family: 'Yu Gothic','Meiryo','Hiragino Kaku Gothic ProN','Noto Sans JP',sans-serif;
  box-sizing: border-box;
  width: 100%;
  padding: .85rem .9rem .85rem .8rem;
  border: 1.5px solid #44485a;
  border-radius: 8px;
  background: #23243a;
  color: #fff;
  font-size: 1rem;
  outline: none;
  transition: border-color .15s, box-shadow .15s, background .2s;
  caret-color: var(--accent-color);
}

.search-controls__select:hover,
.search-controls__input:hover { border-color: rgba(var(--accent), .5); }

.search-controls__select:focus,
.search-controls__input:focus {
  border-color: var(--accent-color);
  box-shadow: 0 0 0 3px rgba(var(--accent), .22), 0 0 18px rgba(var(--accent), .25);
  background: #252744;
}

.search-controls__input::placeholder { color: #b0b2c3; opacity: 1; }

/* modes occupy a full row */
.search-mode { grid-column: 1 / -1; }

/* buttons */
.search-controls__toggle,
.search-controls__button { height: 2.6rem; align-self: center; }

/* ghost toggle */
.search-controls__toggle {
  justify-self: end;
  padding: 0 .9rem;
  border: 1px solid rgba(var(--accent), .55);
  background: rgba(0,0,0,.25);
  color: var(--accent-color);
  border-radius: 6px;
  letter-spacing: .02em;
  cursor: pointer;
  transition: background .15s, border-color .15s, color .15s, transform .05s;
}
.search-controls__toggle:hover { background: rgba(0,0,0,.35); border-color: var(--accent-color); color: var(--text-color); }
.search-controls__toggle:active { transform: translateY(1px); }
.search-controls__toggle:focus-visible { outline: none; box-shadow: 0 0 0 3px rgba(var(--accent), .22); }

/* primary search button — reuse angled geometry */
.search-controls__button {
  --background-color: rgb(15, 15, 19);
  --border-color: linear-gradient(to bottom right, var(--accent-color), var(--accent-color));
  --border-width: .1em; --edge-size: .5em;
  position: relative; isolation: isolate; cursor: pointer;
  padding: 0 .95rem; margin-left: .25rem;
  color: var(--accent-color);
  font-weight: 700; letter-spacing: .02em;
  border: 0; background: var(--background-color);
  clip-path: polygon(var(--edge-size) 0%, 100% 0, 100% calc(100% - var(--edge-size)), calc(100% - var(--edge-size)) 100%, 0 100%, 0% var(--edge-size));
  transition: color .05s, transform .05s;
}
.search-controls__button::before { content: ''; position: absolute; inset: 0; background: var(--border-color); z-index: -2; transition: filter .2s; }
.search-controls__button::after  { content: ''; position: absolute; inset: 0; background: var(--background-color); z-index: -1; clip-path: polygon(var(--border-width) calc(var(--edge-size) + var(--border-width) * .5), calc(var(--edge-size) + var(--border-width) * .5) var(--border-width), calc(100% - var(--border-width)) var(--border-width), calc(100% - var(--border-width)) calc(100% - calc(var(--edge-size) + var(--border-width) * .5)), calc(100% - calc(var(--edge-size) + var(--border-width) * .5)) calc(100% - var(--border-width)), calc(var(--border-width)) calc(100% - var(--border-width))); }
.search-controls__button:hover { color: var(--text-color); transform: translateY(-1px); }
.search-controls__button:hover::before { background: linear-gradient(to bottom right, var(--accent-color), var(--words-color)); filter: brightness(1.25); }
.search-controls__button:active { transform: translateY(0); }
.search-controls__button:focus-visible { outline: none; box-shadow: 0 0 0 3px rgba(var(--accent), .22); }

/* lay out actions at the right end */
.search-controls__toggle { grid-column: 3 / 4; }
.search-controls__button { grid-column: 4 / 5; }

/*---------------------------------------------------------------
  3. RESULTS WRAPPER (do not style inner content yet)
----------------------------------------------------------------*/
.search-results { width: clamp(340px, 90%, 1500px); }

.search-results__heading {
  font-size: clamp(1.1rem, 1vw + .7rem, 1.5rem);
  font-weight: 700;
  letter-spacing: .02em;
  margin: 0 0 .75rem 0;
  text-shadow: 0 0 6px rgba(0, 255, 255, .2);
}

.search-results__container {
  margin-top: .5rem;
  padding: var(--spacing-md);
  background: rgba(0,0,0,.15);
  border: 1px solid rgba(var(--accent), .25);
  border-radius: 6px;
}

/*---------------------------------------------------------------
  4. RESPONSIVE TWEAKS
----------------------------------------------------------------*/
@media (max-width: 1024px) {
  .search-controls__form { grid-template-columns: minmax(92px, auto) 1fr auto; }
  .search-controls__toggle { grid-column: 2 / 3; justify-self: start; }
  .search-controls__button { grid-column: 3 / 4; }
}

@media (max-width: 768px) {
  .search-main { gap: var(--spacing-md); }
  .search-controls { padding: var(--spacing-md); }
  .search-controls__form { grid-template-columns: 1fr; gap: var(--spacing-md); }
  .search-controls label { order: 1; }
  .search-controls__select { order: 2; }
  .search-mode { order: 3; }
  .search-controls__toggle { order: 4; justify-self: stretch; }
  .search-controls__button { order: 5; justify-self: stretch; }
}

/*---------------------------------------------------------------
  5. REDUCED MOTION
----------------------------------------------------------------*/
@media (prefers-reduced-motion: reduce) {
  /* no animations defined here; keep placeholder for future */
}
