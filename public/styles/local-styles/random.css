/*---------------------------------------------------------------
  0. SCANLINE / GRID BACKDROP (match search page)
----------------------------------------------------------------*/
.app-container {
  position: relative;
  min-height: 100vh;               /* allow tall results */
  /* rely on global .app-container margin-left for desktop */
  overflow-x: hidden;
  background-image: linear-gradient(175deg, var(--accent-color) -200%, rgba(13,15,17,1) 25%);
  background-attachment: fixed;
  background-size: cover;
  isolation: isolate;              /* keep pseudo-elements behind content */
}
.app-container::before {
  content: '';
  position: absolute; inset: 0; pointer-events: none;
  background-size: 1024px 1024px;
  background: radial-gradient(circle at 75% 15%, rgba(114,105,221,.08) 0%, rgba(11,21,158,0) 35%);
  z-index: 0;
}
.app-container::after {
  content: '';
  position: absolute; inset: 0; pointer-events: none;
  background-image:
    url('assets/images/white_noise_overlay.png'),
    repeating-linear-gradient(to bottom, rgba(255,255,255,.06) 0px, rgba(255,255,255,.06) 3px, transparent 3px, transparent 6px);
  mix-blend-mode: soft-light;
  z-index: 0;
}
@media (max-width: 768px) {
  .app-container { padding-top: var(--btn-size-mobile); background-attachment: scroll; }
}

/*---------------------------------------------------------------
  1. PAGE LAYOUT (settings over results)
----------------------------------------------------------------*/
.random-main {
  max-width: min(1600px, 96vw);
  margin-inline: auto;
  padding: clamp(12px, 1.5vw, 20px);
  display: grid;
  grid-template-rows: auto 1fr;
  gap: clamp(8px, 1vw, 16px);
  position: relative;
  z-index: 1; /* above the background overlays */
}

/*---------------------------------------------------------------
  2. CONTROLS PANEL â€“ neon plate with cut-corner
----------------------------------------------------------------*/
.random-controls__title {
  font-family: Consolas, monospace;
  font-size: clamp(1.25rem, 1.2vw + .9rem, 2rem);
  font-weight: 700; letter-spacing: .02em; margin: 0 0 var(--spacing-md) 0; text-shadow: 0 0 6px rgba(0,255,255,.25);
  position: relative; display: flex; align-items: center; gap: .75rem;
}
.random-controls__title .title-trail{ flex:1; height:2px; background: linear-gradient(90deg, var(--accent-color) 0%, var(--words-color) 50%, transparent 100%); opacity:.85 }

.random-controls__form-wrapper {
  position: relative;
  filter: drop-shadow(1px 0 0 var(--accent-color)) drop-shadow(-1px 0 0 var(--accent-color)) drop-shadow(0 1px 0 var(--accent-color)) drop-shadow(0 -1px 0 var(--accent-color)) drop-shadow(0 0 10px rgba(var(--accent), .3));
}
.random-controls__form {
  position: relative; padding: var(--spacing-lg); background: rgba(13, 15, 17, .95);
  clip-path: polygon(0 0, 0 96%, 2% 100%, 98.5% 100%, 100% 98%, 100% 3%, 90% 3%, 85% 0);
  display: flex; flex-direction: column; gap: var(--spacing-md);
}
.random-controls__form::after { content: ''; position: absolute; inset: -1px; clip-path: inherit; pointer-events: none; z-index: -1; mix-blend-mode: screen; opacity: .3; }
.random-controls__form::before { content: ''; position: absolute; inset: 0; clip-path: inherit; pointer-events: none; background:
  repeating-linear-gradient(to right, rgba(255,255,255,.02) 0 1px, transparent 1px 44px),
  repeating-linear-gradient(to bottom, rgba(255,255,255,.02) 0 1px, transparent 1px 44px); mask: linear-gradient(#000, transparent 85%); }

/* inner grid: left = mode, right = slider */
.random-controls__grid{
  display:grid;
  grid-template-columns: minmax(260px, 1fr) minmax(420px, 1fr);
  gap: 16px;
  align-items: stretch;
}
@media (max-width: 1024px){
  .random-controls__grid{ grid-template-columns: 1fr; }
}

/* actions */
.random-actions { display:flex; justify-content:flex-end; }
.random-controls__button {
  --background-color: rgb(15, 15, 19);
  --border-color: linear-gradient(to bottom right, var(--accent-color), var(--accent-color));
  --border-width: .1em; --edge-size: .5em; position: relative; isolation:isolate; cursor:pointer; padding: .8rem 1rem;
  color: var(--accent-color); font-weight: 700; letter-spacing: .02em; border: 0; background: var(--background-color);
  clip-path: polygon(var(--edge-size) 0%, 100% 0, 100% calc(100% - var(--edge-size)), calc(100% - var(--edge-size)) 100%, 0 100%, 0% var(--edge-size));
  transition: color .05s, transform .05s; min-width: 12rem;
}
.random-controls__button::before{ content:''; position:absolute; inset:0; background: var(--border-color); z-index:-2; transition: filter .2s; }
.random-controls__button::after{ content:''; position:absolute; inset:0; background: var(--background-color); z-index:-1; clip-path: polygon(var(--border-width) calc(var(--edge-size) + var(--border-width) * .5), calc(var(--edge-size) + var(--border-width) * .5) var(--border-width), calc(100% - var(--border-width)) var(--border-width), calc(100% - var(--border-width)) calc(100% - calc(var(--edge-size) + var(--border-width) * .5)), calc(100% - calc(var(--edge-size) + var(--border-width) * .5)) calc(100% - var(--border-width)), calc(var(--border-width)) calc(100% - var(--border-width))); }
.random-controls__button:hover{ color: var(--text-color); transform: translateY(-1px); }
.random-controls__button:hover::before{ background: linear-gradient(to bottom right, var(--accent-color), var(--words-color)); filter: brightness(1.25); }
.random-controls__button:active{ transform: translateY(0); }

/*---------------------------------------------------------------
  3. MODE SWITCH
----------------------------------------------------------------*/
.mode-block__label{ font-family: Consolas, monospace; font-size:.9rem; color: rgba(255,255,255,.85); margin: 0 0 .25rem 2px; letter-spacing:.08em }
.mode-switch{
  position:relative; display:grid; grid-template-columns: repeat(5, minmax(0,1fr));
  gap:10px; padding:12px; border-radius:12px;
  background: linear-gradient(180deg, rgba(var(--accent), .06), rgba(255,63,180,.04));
  border:1px solid rgba(var(--accent), .35); box-shadow: inset 0 0 0 1px rgba(255,63,180,.08);
}
.mode-switch input[type="radio"]{ position:absolute; inset:auto; opacity:0; pointer-events:none }
.mode-chip{ --chip: var(--accent-color); min-width:0; position:relative; display:grid; grid-template-rows:auto auto; align-content:center; gap:2px; padding:12px 10px; border-radius:12px; cursor:pointer; background: linear-gradient(180deg, #0b1426, #0a1222); border:1px solid rgba(255,255,255,0.08); box-shadow: inset 0 0 0 1px rgba(0,0,0,0.3); transition: transform 140ms ease, box-shadow 140ms ease, border-color 140ms ease, background 140ms ease, filter 140ms ease; }
.mode-chip:hover{ transform: translateY(-1px); filter: brightness(1.06) }
.mode-chip:focus-visible{ outline:none; box-shadow: 0 0 0 3px rgba(var(--accent), .45) }
.chip-jp{ font-weight:700; line-height:1.2; font-size: clamp(13px, .95vw, 20px) }
.chip-en{ font-size: clamp(8px, .8vw, 10px); color:#8fa0c2; letter-spacing:.1em; text-transform:uppercase; min-width:0; overflow:hidden; text-overflow:ellipsis }
.mode-chip[data-color="kanji"]{ --chip: var(--kanji-color) }
.mode-chip[data-color="words"]{ --chip: var(--words-color) }
.mode-chip[data-color="yojijukugo"]{ --chip: var(--yojijukugo-color) }
.mode-chip[data-color="kotowaza"]{ --chip: var(--kotowaza-color) }
.mode-chip[data-color="sentences"]{ --chip: var(--sentences-color) }

#mode-kanji:checked + label[for="mode-kanji"],
#mode-words:checked + label[for="mode-words"],
#mode-yojijukugo:checked + label[for="mode-yojijukugo"],
#mode-kotowaza:checked + label[for="mode-kotowaza"],
#mode-sentences:checked + label[for="mode-sentences"]{
  border-color: rgba(255,255,255,.18);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.12), 0 0 12px var(--chip), 0 0 24px color-mix(in srgb, var(--chip) 30%, transparent);
  background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(0,0,0,.05));
}
.mode-chip::after{
  content:""; position:absolute; left:8px; right:8px; top:6px; height:2px; border-radius:2px;
  background: linear-gradient(90deg, var(--chip), transparent 70%); opacity:.55
}

/* underline cursor */
.mode-cursor{
  position:absolute; top:8px; left:12px; height:3px; width:0;
  border-radius:8px; background: var(--accent-color);
  box-shadow: 0 0 10px var(--accent-color), 0 0 22px color-mix(in srgb, var(--accent-color) 60%, transparent);
  transition: transform 320ms cubic-bezier(.2,.8,.2,1), width 320ms cubic-bezier(.2,.8,.2,1), background-color 120ms ease, box-shadow 120ms ease;
  will-change: transform,width;
}

/*---------------------------------------------------------------
  4. KANKEN HUD SLIDER (reversed)
----------------------------------------------------------------*/
.kanken-hud{ border:1px solid rgba(var(--accent), .35); border-radius:16px; padding:14px; background: linear-gradient(180deg, rgba(8,14,22,.9), rgba(8,14,22,.6)); box-shadow: inset 0 0 0 1px rgba(255,63,180,.09) }
.kanken-hud__label{ display:flex; align-items:center; gap:.6rem; margin-bottom:8px; color:#a9b4cf; font-size:.86rem; letter-spacing:.18em; text-transform:uppercase }
.kanken-hud__label .led{ width:8px; height:8px; border-radius:2px; background: radial-gradient(circle at 30% 30%, #fff, var(--accent-color) 45%, transparent 62%); box-shadow: 0 0 8px var(--accent-color) }
.kanken-hud__readout{ margin-left:auto; font-weight:800; letter-spacing:.14em; color: var(--text-color) }

.kanken-hud__range-wrap{ position:relative; padding:22px 12px 26px; border-radius:12px; background: linear-gradient(180deg, rgba(12,20,30,.9), rgba(12,20,30,.6)) }
.kanken-hud__grid{ position:absolute; inset:0; pointer-events:none; background:
  repeating-linear-gradient(90deg, rgba(var(--accent), .06) 0 1px, transparent 1px 32px),
  repeating-linear-gradient(0deg, rgba(255,63,180,.05) 0 1px, transparent 1px 32px),
  repeating-linear-gradient(0deg, rgba(255,255,255,.02) 0 2px, transparent 2px 4px);
  border-radius:12px; opacity:.35 }

.kanken-hud__slider{ appearance:none; width:100%; height:36px; background:transparent; position:relative; outline:none }
.kanken-hud__slider::-webkit-slider-runnable-track{ height:6px; border-radius:999px; background: linear-gradient(90deg, var(--accent-color) 0, var(--accent-color) var(--pct,0%), rgba(var(--accent), .12) var(--pct,0%), rgba(var(--accent), .12) 100%), linear-gradient(180deg, rgba(0,0,0,.5), rgba(255,255,255,.05)); box-shadow: 0 0 18px color-mix(in srgb, var(--accent-color) 16%, transparent) inset }
.kanken-hud__slider::-moz-range-track{ height:6px; border-radius:999px; background: linear-gradient(90deg, var(--accent-color) 0, var(--accent-color) var(--pct,0%), rgba(var(--accent), .12) var(--pct,0%), rgba(var(--accent), .12) 100%), linear-gradient(180deg, rgba(0,0,0,.5), rgba(255,255,255,.05)) }
.kanken-hud__slider::-webkit-slider-thumb{ -webkit-appearance:none; appearance:none; width:28px; height:28px; margin-top:-11px; cursor:pointer; border:0; background: radial-gradient(40% 40% at 30% 30%, #fff, var(--accent-color) 60%, color-mix(in srgb, var(--accent-color) 60%, transparent) 61%, transparent 62%), linear-gradient(180deg, rgba(0,0,0,.15), rgba(255,255,255,.05)); clip-path: polygon(25% 0, 75% 0, 100% 50%, 75% 100%, 25% 100%, 0 50%); box-shadow: 0 0 14px color-mix(in srgb, var(--accent-color) 70%, transparent), 0 0 0 2px color-mix(in srgb, var(--accent-color) 70%, transparent) }
.kanken-hud__slider::-moz-range-thumb{ width:28px; height:28px; border:0; cursor:pointer; background: radial-gradient(40% 40% at 30% 30%, #fff, var(--accent-color) 60%, color-mix(in srgb, var(--accent-color) 60%, transparent) 61%, transparent 62%), linear-gradient(180deg, rgba(0,0,0,.15), rgba(255,255,255,.05)); clip-path: polygon(25% 0, 75% 0, 100% 50%, 75% 100%, 25% 100%, 0 50%); box-shadow: 0 0 14px color-mix(in srgb, var(--accent-color) 70%, transparent), 0 0 0 2px color-mix(in srgb, var(--accent-color) 70%, transparent) }

.kanken-hud__marks{ position:relative; display:grid; grid-template-columns:repeat(13, 1fr); gap:0; list-style:none; margin:10px 2px 0; padding:0 }
.kanken-hud__marks li{ position:relative; text-align:center; color:#8fa0c2; font-size:.72rem; letter-spacing:.14em }
.kanken-hud__marks li::before{ content:""; position:absolute; left:50%; transform:translateX(-50%); top:-10px; height:8px; width:2px; background: color-mix(in srgb, var(--accent-color) 60%, transparent); box-shadow: 0 0 6px color-mix(in srgb, var(--accent-color) 60%, transparent) }
.kanken-hud__marks li.active{ color: var(--text-color) }

.kanken-hud__bubble{
  position:absolute; top:-26px; left:var(--bubble-x, 0px);
  transform:translateX(-50%); background: linear-gradient(180deg, color-mix(in srgb, var(--accent-color) 90%, transparent), color-mix(in srgb, var(--accent-color) 55%, transparent));
  color:#061417; border:1px solid color-mix(in srgb, var(--accent-color) 75%, transparent);
  box-shadow: 0 0 18px color-mix(in srgb, var(--accent-color) 45%, transparent);
  padding:2px 8px; border-radius:10px; font-weight:800; letter-spacing:.14em; text-shadow:0 0 8px rgba(0,0,0,.35)
}
.kanken-hud__bubble::after{ content:""; position:absolute; left:50%; bottom:-6px; width:10px; height:6px; transform:translateX(-50%); background: linear-gradient(180deg, color-mix(in srgb, var(--accent-color) 90%, transparent), color-mix(in srgb, var(--accent-color) 55%, transparent)); clip-path: polygon(50% 100%, 0 0, 100% 0) }

.kanken-hud__meter{ display:grid; grid-template-columns:repeat(13, 1fr); gap:4px; margin-top:12px }
.kanken-hud__meter span{ height:6px; border-radius:2px; background: rgba(var(--accent), .08); box-shadow: inset 0 0 0 1px rgba(var(--accent), .12) }
.kanken-hud__meter span.on{ background: linear-gradient(180deg, var(--accent-color), color-mix(in srgb, var(--accent-color) 45%, transparent)); box-shadow: 0 0 10px color-mix(in srgb, var(--accent-color) 60%, transparent) }

/*---------------------------------------------------------------
  5. RESULTS AREA
----------------------------------------------------------------*/
.random-results__heading{ display: none; font-size: clamp(1.1rem, 1vw + .7rem, 1.5rem); font-weight:700; letter-spacing:.02em; margin:0 0 .5rem 0; text-shadow:0 0 6px rgba(0,255,255,.2) }
.random-results__container{
  min-height: 320px; padding: var(--spacing-md);
  background: linear-gradient(180deg, rgba(0,0,0,.12), rgba(0,0,0,.06)),
              repeating-linear-gradient(0deg, rgba(var(--accent), .07) 0 1px, transparent 1px 36px),
              repeating-linear-gradient(90deg, rgba(255,63,180,.05) 0 1px, transparent 1px 36px);
  border:1px dashed rgba(var(--accent), .25); border-radius: 8px; overflow:hidden
}

/*---------------------------------------------------------------
  6. UTILITIES
----------------------------------------------------------------*/
.sr-only{ position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip: rect(0,0,0,0); white-space:nowrap; border:0 }
.hidden{ display:none !important }
